<!DOCTYPE html>
<html>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <head>
    <title>メイン画面</title>
  </head>
  <script type="text/javascript">
    function Get() {
      var req = new XMLHttpRequest();
      req.open('GET', '/api/realtime', true);
      req.send(null);
      req.onreadystatechange = function() {
        if (req.readyState == 4) { // 通信の完了時
          if (req.status == 200) { // 通信の成功時
            var obj = JSON.parse(req.responseText);
            console.log(obj);
            console.log(obj.length);
            if (obj.length >= 1) {
              frm1.obj_temp.value = obj[0].obj_temp;
              frm1.temp.value = obj[0].temp;
              frm1.accel_x.value = obj[0].accel_x;
              frm1.accel_y.value = obj[0].accel_y;
              frm1.accel_z.value = obj[0].accel_z;
              frm1.hum.value = obj[0].hum;
              frm1.baro.value = obj[0].baro;
              frm1.lux.value = obj[0].lux;
            }
            if (obj.length >= 2) {
              frm2.obj_temp.value = obj[1].obj_temp;
              frm2.temp.value = obj[1].temp;
              frm2.accel_x.value = obj[1].accel_x;
              frm2.accel_y.value = obj[1].accel_y;
              frm2.accel_z.value = obj[1].accel_z;
              frm2.hum.value = obj[1].hum;
              frm2.baro.value = obj[1].baro;
              frm2.lux.value = obj[1].lux;
            }
          }
//        } else {
//          frm.result.value = "通信中..."
        }
      }
    }

    function History() {
      location.href = '/history.html';
    }
    function Setting() {
      location.href = '/setting.html';
    }
    function loop() {
      Get();
      setTimeout(loop, 2000);
    }
    window.onload = loop;

  </script>
  <body>
    ■メイン画面■<BR>
    センサ１<BR>
    <form name="frm1">
      対物温度<input type="text" name="obj_temp" size="15" readonly="readonly"><br>
      気温<input type="text" name="temp" size="15" readonly="readonly"><br>
      重力加速度(x)<input type="text" name="accel_x" size="15" readonly="readonly"><br>
      重力加速度(y)<input type="text" name="accel_y" size="15" readonly="readonly"><br>
      重力加速度(z)<input type="text" name="accel_z" size="15" readonly="readonly"><br>
      湿度<input type="text" name="hum" size="15" readonly="readonly"><br>
      気圧<input type="text" name="baro" size="15" readonly="readonly"><br>
      明るさ<input type="text" name="lux" size="15" readonly="readonly"><br>
    </form>

    センサ２<BR>
    <form name="frm2">
      対物温度<input type="text" name="obj_temp" size="15" readonly="readonly"><br>
      気温<input type="text" name="temp" size="15" readonly="readonly"><br>
      重力加速度(x)<input type="text" name="accel_x" size="15" readonly="readonly"><br>
      重力加速度(y)<input type="text" name="accel_y" size="15" readonly="readonly"><br>
      重力加速度(z)<input type="text" name="accel_z" size="15" readonly="readonly"><br>
      湿度<input type="text" name="hum" size="15" readonly="readonly"><br>
      気圧<input type="text" name="baro" size="15" readonly="readonly"><br>
      明るさ<input type="text" name="lux" size="15" readonly="readonly"><br>
    </form>

    <INPUT type="button" name="button1" onClick="History()" value="履歴画面"><BR>
    <INPUT type="button" name="button2" onClick="Setting()" value="設定画面"><BR>
  </body>
</html>

